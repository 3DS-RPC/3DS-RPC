extends ../layouts/dashboard.pug

block config
    - var bodyClass = 'sb-nav-fixed'
    - var pageTitle = "{{ data['User']['username'] }}"
    - var sidenavStyle = 'sb-sidenav-dark'

block content
    .container-fluid.px-4
        include includes/page-header.pug
        
        html {% if data['User']['Presence']['game'] %}
        .modal.fade#gameInfo(tabindex = '-1', aria-labelledby = 'modelLabel', aria-hidden = 'true')
            .modal-dialog
                .modal-content
                    .modal-header
                        h5.modal-title#modalLabel
                            b {{ data['User']['Presence']['game']['name'] }}
                            | by {{ data['User']['Presence']['game']['publisher']['name'] }}
                        button.btn-close(type = 'button' data-bs-dismiss = 'modal' aria-label = 'Close')
                    .modal-body
                        div
                            img(src = "{{ data['User']['Presence']['game']['banner_url'] }}", style = "height: 100%; width: 100%;")
                        div.d-flex.justify-content-between
                            div Genre: {{ data['User']['Presence']['game']['display_genre'] }}
                            div Rating:
                                b {{ data['User']['Presence']['game']['star_rating_info']['score'] }}/5
                                | Stars
                        div.d-flex.justify-content-between
                            div Price: {{ data['User']['Presence']['game']['price_on_retail'] }}
                            div Released:
                                b {{ data['User']['Presence']['game']['release_date_on_eshop'] }}
                    .modal-footer
                        html {% if data['User']['Presence']['game']['name'] != 'Home Screen' %}
                        button.btn.btn-secondary(type = 'button' onclick = "window.open(`https://www.google.com/search?q={{ '+'.join((data['User']['Presence']['game']['name'] + ' ' + data['User']['Presence']['game']['publisher']['name']).split(' ')) }}`, `_blank`);") Search Online
                        html {% endif %}
                        button.btn.btn-primary(type = 'button' data-bs-dismiss = 'modal') Close
        html {% endif %}

        .row
            .col-sm-2.d-flex.align-items-end
                img(src = "{{ data['User']['mii']['face'] }}", width = '100%', style = 'background: linear-gradient(0deg, rgb(255, 198, 147) 0%, rgb(254, 245, 239, 0.1) 100%);')
            .col-md-5
                .row(style = 'padding-top: 25px')
                    .card.text-center
                        html {% if data['User']['Presence']['game'] %}
                        .card-header(style = 'background-color: inherit;')
                            | Currently playing...
                        html {% endif %}
                        a.card-body.d-flex.align-items-center.text-black(style = 'text-decoration: none;', data-bs-toggle="modal", href = '#gameInfo')
                            html {% if data['User']['Presence']['game'] %}
                            .col-md-2
                                img(src = "{{ data['User']['Presence']['game']['icon_url'] }}", width = '100%')
                            p(style = 'padding-left: 1rem;') {{ data['User']['Presence']['game']['name'] }}
                            html {% else %}
                            .text-muted.text-center Offline
                            html {% endif %}
                        html {% if data['User']['Presence']['gameDescription'] %}
                        .card-footer.d-flex.align-items-center(style = 'background-color: inherit;')
                            .text-muted
                                html.
                                  {% for i in data['User']['Presence']['gameDescription'].split('\n') %}
                                  {{ i }}
                                  <br>
                                  {% endfor %}
                        html {% endif %}
        .row
            html {% if data['User']['message'] %}
            .col-xl-2(style = 'padding-top: 25px')
                .card
                    .card-header(style = 'background-color: inherit;')
                        b STATUS
                    .card-body
                        | {{ data['User']['message'] }}
            html {% endif %}
            .col-xl-2(style = 'padding-top: 25px')
                .card
                    .card-header(style = 'background-color: inherit;')
                        b MEMBER SINCE
                    .card-body
                        | {{ data['User']['accountCreation'] }}
            .col-xl-2(style = 'padding-top: 25px')
                .card
                    .card-header(style = 'background-color: inherit;')
                        b LAST ONLINE
                    .card-body
                        | {{ data['User']['lastOnline'] }}
        .row.d-flex.justify-content-between(style = 'padding-top: 2rem;')
          .col-xl-7
              .card
                  .card-header(style = 'background-color: inherit;')
                      i.fas.fa-chart-area.me-1
                      | Activity Log
                  .card-body
                    
